<mat-toolbar class="header" color="primary" class="mat-elevation-z4">
  üéß SoundBar
  <button style="width: 100px; height: 30px;" *ngIf="!isAuthorized" (click)="show()">
    –í–æ–π—Ç–∏
  </button>
</mat-toolbar>
<div class="container">
  <!-- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
  <ng-container *ngIf="showFormAuth">
    <mat-card *ngIf="!isAuthorized" class="auth-form">
    <mat-card-title>–í—Ö–æ–¥</mat-card-title>
    <form [formGroup]="loginForm" (ngSubmit)="login()">
      <mat-form-field appearance="outline">
        <mat-label>–õ–æ–≥–∏–Ω</mat-label>
        <input matInput formControlName="username" required />
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>–ü–∞—Ä–æ–ª—å</mat-label>
        <input matInput type="password" formControlName="password" required />
      </mat-form-field>
      <button mat-raised-button color="primary" type="submit">–í–æ–π—Ç–∏</button>
    </form>
    </mat-card>
  </ng-container>
  

  <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Å–Ω–∏ (—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º) -->
  <mat-card *ngIf="isAuthorized" class="add-form">
    <mat-card-title>–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Å–Ω—é</mat-card-title>
    <form [formGroup]="addSongForm" (ngSubmit)="addSong()">
      <mat-form-field appearance="outline">
        <mat-label>–ù–∞–∑–≤–∞–Ω–∏–µ</mat-label>
        <input matInput formControlName="title" required />
      </mat-form-field>
      <button mat-raised-button color="accent" type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
    </form>
  </mat-card>

  <!-- –¢–µ–∫—É—â–∞—è –ø–µ—Å–Ω—è -->
  <mat-card class="now-playing">
    <mat-card-content>
      <h3>–°–µ–π—á–∞—Å –∏–≥—Ä–∞–µ—Ç</h3>
      <p *ngIf="currentSong; else noSong">{{ currentSong.title }}</p>
      <ng-template #noSong>
        <p>–ù–∏—á–µ–≥–æ –Ω–µ –∏–≥—Ä–∞–µ—Ç</p>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <!-- –û—á–µ—Ä–µ–¥—å -->
  <mat-card class="queue">
    <mat-card-content>
      <h3>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Å–Ω–∏ 20 —Ä—É–±–ª–µ–π</h3>
      <h3>–°–ª–µ–¥—É—é—â–∏–µ –ø–µ—Å–Ω–∏</h3>
      <ng-container *ngIf="queue.length; else emptyQueue">
        <mat-list>
          <mat-list-item *ngFor="let song of queue; let i = index">
            <span>{{ i + 1 }}. {{ song.title }}</span>
          </mat-list-item>
        </mat-list>
      </ng-container>
      <ng-template #emptyQueue>
        <p>–û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞</p>
      </ng-template>
    </mat-card-content>
  </mat-card>

  <!-- –ü–æ–∏—Å–∫ -->
  <div class="search-section">
    <mat-form-field appearance="outline" class="search-box">
      <mat-label>–ü–æ–∏—Å–∫ –ø–µ—Å–Ω–∏</mat-label>
      <input matInput [formControl]="searchControl" />
    </mat-form-field>
    <button mat-raised-button color="primary" (click)="onSearchClick()">–ù–∞–π—Ç–∏</button>

    <mat-list *ngIf="filteredSongs.length">
      <mat-list-item class="search-container" *ngFor="let song of filteredSongs">
        <span>{{ song.title }}</span>

        <ng-container *ngIf="loadingSongId === song.id; else addBtn">
          <mat-progress-spinner diameter="24" strokeWidth="3" mode="indeterminate"></mat-progress-spinner>
        </ng-container>

        <ng-template #addBtn>
          <button mat-raised-button color="accent" (click)="addToQueue(song)">
            –ó–∞–∫–∞–∑–∞—Ç—å
          </button>
        </ng-template>
      </mat-list-item>
    </mat-list>
  </div>
</div>
